<!-- COLLECTIONS -->
<section class="collections-section reveal">
  <div class="section-header">
    <div>
      <div class="section-label">{{ section.settings.subheading }}</div>
      <h2 class="section-title">{{ section.settings.heading }}</h2>
    </div>
    <a href="{{ section.settings.button_link | default: routes.all_products_collection_url }}" class="section-link">{{ section.settings.button_label }}</a>
  </div>

  <div class="collections-grid">
    {% for block in section.blocks %}
      {% assign collection = collections[block.settings.collection] %}
      <div class="collection-card" {{ block.shopify_attributes }}>
        <div class="collection-bg" style="background: {{ block.settings.bg_color }};">
          {% if block.settings.image != blank %}
            <img src="{{ block.settings.image | img_url: 'master' }}" alt="{{ block.settings.title | escape }}" style="width: 100%; height: 100%; object-fit: cover;">
          {% else %}
            <span class="col-placeholder-text">{{ block.settings.title }}</span>
          {% endif %}
        </div>
        <div class="collection-overlay">
          <div class="collection-overlay-label">{{ block.settings.label }}</div>
          <div class="collection-overlay-name">{{ block.settings.title }}</div>
          <div class="collection-overlay-verse">{{ block.settings.verse }}</div>
          <a href="{{ collection.url | default: '#' }}" class="collection-overlay-btn">Shop Now →</a>
        </div>
      </div>
    {% endfor %}
  </div>
</section>

{% schema %}
{
  "name": "Collections Grid",
  "settings": [
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "Shop by Collection"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "The Collections"
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Button Label",
      "default": "View All →"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button Link"
    }
  ],
  "blocks": [
    {
      "type": "collection",
      "name": "Collection",
      "limit": 3,
      "settings": [
        {
          "type": "collection",
          "id": "collection",
          "label": "Collection"
        },
        {
          "type": "text",
          "id": "label",
          "label": "Eyebrow Label",
          "default": "Collection 01"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Override Title",
          "default": "BURDENS"
        },
        {
          "type": "text",
          "id": "verse",
          "label": "Verse/Subtitle",
          "default": "Galatians 6:2"
        },
        {
          "type": "color_background",
          "id": "bg_color",
          "label": "Background Gradient",
          "default": "linear-gradient(160deg, #2a2520 0%, #1a1310 100%)"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image (Optional)"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Collections Grid",
      "blocks": [
        { "type": "collection" },
        { "type": "collection" },
        { "type": "collection" }
      ]
    }
  ]
}
{% endschema %}
