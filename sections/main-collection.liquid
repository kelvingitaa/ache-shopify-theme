<!-- MAIN COLLECTION -->
<div class="page-hero">
  <div class="page-hero-bg-text">{{ collection.title }}</div>
  <div class="page-eyebrow">ACHE â€” {{ collection.title }}</div>
  <h1 class="page-title">
    <em>{{ collection.description | strip_html | truncatewords: 3 | default: 'Every piece carries' }}</em>
    {{ collection.title }}
  </h1>
</div>

<div class="shop-controls">
  <div class="filter-row">
    <button class="filter-btn active" onclick="filterProducts(this,'all')">All</button>
  </div>
  <div style="display:flex;gap:1rem;align-items:center">
    <span class="product-count">{{ collection.products_count }} Products</span>
    <select class="sort-select">
      <option>Sort: Featured</option>
      <option>Price: Low to High</option>
      <option>Price: High to Low</option>
      <option>Newest</option>
    </select>
  </div>
</div>

<div class="shop-grid">
  {% for product in collection.products %}
    <div class="shop-product-card" onclick="window.location.href='{{ product.url }}'">
      <div class="shop-img">
        {% if product.tags contains 'New' %}
          <span class="shop-badge new">New</span>
        {% endif %}
        {% if product.compare_at_price > product.price %}
          <span class="shop-badge sale">Sale</span>
        {% endif %}
        <div class="shop-img-inner si-1" style="background: linear-gradient(160deg, #ccc9bc 0%, #b5b09f 100%);">
          {% if product.featured_image != blank %}
            <img src="{{ product.featured_image | img_url: '500x' }}" alt="{{ product.title | escape }}" style="width: 100%; height: 100%; object-fit: cover;">
          {% else %}
            <span style="font-size:.42rem;font-weight:700;letter-spacing:.3em;text-transform:uppercase;color:rgba(0,0,0,.2);">Campaign Image</span>
            <span style="font-size:2rem;font-weight:800;color:rgba(0,0,0,.06);letter-spacing:.1em;">ACHE</span>
          {% endif %}
        </div>
        <button class="shop-quick-add" onclick="event.stopPropagation(); window.location.href='{{ product.url }}'">Quick Add +</button>
      </div>
      <div class="shop-info">
        <div class="shop-coll-tag">{{ product.vendor | default: collection.title | upcase }}</div>
        <div class="shop-name">{{ product.title }}</div>
        <div class="shop-verse">{{ product.metafields.custom.verse | default: '"Bear one another\'s burdens..."' }}</div>
        <div class="shop-bottom">
          <span class="shop-price">{{ product.price | money }}</span>
          <div class="shop-colours">
            <!-- Colour swatches can be derived from variants if needed -->
            {% for variant in product.variants %}
              {% if forloop.index <= 2 %}
                 <div class="shop-colour-dot" style="background: {{ variant.title | downcase | replace: ' ', '' }};"></div>
              {% endif %}
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
  {% else %}
    <div style="padding: 4rem; text-align: center; grid-column: 1 / -1;">
      <p>No products found in this collection.</p>
    </div>
  {% endfor %}
</div>

{% schema %}
{
  "name": "Collection Template",
  "settings": []
}
{% endschema %}
